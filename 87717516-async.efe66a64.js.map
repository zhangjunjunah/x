{"version":3,"sources":["docs/react/model-use-openai.zh-CN.md?type=text"],"sourcesContent":["\n  import '/home/runner/work/x/x/docs/react/model-use-openai.zh-CN.md?watch=parent';\n  export const texts = [{\"value\":\"这篇指南将介绍如何在使用 Ant Design X 搭建的应用中接入 OpenAI 提供的模型服务。\",\"paraId\":0},{\"value\":\"等同于接入兼容 OpenAI 的模型推理服务，参考 \",\"paraId\":1,\"tocIndex\":0},{\"value\":\"模型接入-通义千问\",\"paraId\":2,\"tocIndex\":0},{\"value\":\"通常情况 openai-node 用于 node 环境，如果在浏览器环境使用，需要开启 \",\"paraId\":3,\"tocIndex\":1},{\"value\":\"dangerouslyAllowBrowser\",\"paraId\":3,\"tocIndex\":1},{\"value\":\"。\",\"paraId\":3,\"tocIndex\":1},{\"value\":\"注意: \",\"paraId\":4,\"tocIndex\":1},{\"value\":\"dangerouslyAllowBrowser\",\"paraId\":4,\"tocIndex\":1},{\"value\":\" 存在安全风险，对此 openai-node 的官方文档有详细的\",\"paraId\":4,\"tocIndex\":1},{\"value\":\"说明\",\"paraId\":4,\"tocIndex\":1},{\"value\":\"。\",\"paraId\":4,\"tocIndex\":1},{\"value\":\"import { useXAgent, useXChat, Sender, Bubble } from '@ant-design/x';\\nimport OpenAI from 'openai';\\nimport React from 'react';\\n\\nconst client = new OpenAI({\\n  apiKey: process.env['OPENAI_API_KEY'],\\n  dangerouslyAllowBrowser: true,\\n});\\n\\nconst Demo: React.FC = () => {\\n  const [agent] = useXAgent({\\n    request: async (info, callbacks) => {\\n      const { messages, message } = info;\\n\\n      const { onSuccess, onUpdate, onError } = callbacks;\\n\\n      // current message\\n      console.log('message', message);\\n\\n      // history messages\\n      console.log('messages', messages);\\n\\n      let content: string = '';\\n\\n      try {\\n        const stream = await client.chat.completions.create({\\n          model: 'gpt-4o',\\n          // if chat context is needed, modify the array\\n          messages: [{ role: 'user', content: message }],\\n          // stream mode\\n          stream: true,\\n        });\\n\\n        for await (const chunk of stream) {\\n          content += chunk.choices[0]?.delta?.content || '';\\n\\n          onUpdate(content);\\n        }\\n\\n        onSuccess(content);\\n      } catch (error) {\\n        // handle error\\n        // onError();\\n      }\\n    },\\n  });\\n\\n  const {\\n    // use to send message\\n    onRequest,\\n    // use to render messages\\n    messages,\\n  } = useXChat({ agent });\\n\\n  const items = messages.map(({ message, id }) => ({\\n    // key is required, used to identify the message\\n    key: id,\\n    content: message,\\n  }));\\n\\n  return (\\n    <div>\\n      <Bubble.List items={items} />\\n      <Sender onSubmit={onRequest} />\\n    </div>\\n  );\\n};\\n\\nexport default Demo;\\n\",\"paraId\":5,\"tocIndex\":1}];\n  "],"names":[],"mappings":"6PAEe,6CAAA,QADN,YACA,IAAM,EAAQ,CAAC,CAAC,MAAQ,iMAAqD,OAAS,CAAC,EAAE,CAAC,MAAQ,kHAA6B,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,oDAAY,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,uKAA+C,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,0BAA0B,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,SAAI,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,iBAAO,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,0BAA0B,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,6HAAmC,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,eAAK,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,SAAI,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,6lDAA6lD,OAAS,EAAE,SAAW,CAAC,EAAE"}