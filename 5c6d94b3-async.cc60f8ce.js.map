{"version":3,"sources":[".dumi/theme/common/PrevAndNext.tsx"],"sourcesContent":["import { LeftOutlined, RightOutlined } from '@ant-design/icons';\nimport type { GetProp, MenuProps } from 'antd';\nimport { createStyles } from 'antd-style';\nimport classNames from 'classnames';\nimport type { ReactElement } from 'react';\nimport React, { useContext, useMemo } from 'react';\n\nimport useMenu from '../../hooks/useMenu';\nimport SiteContext from '../slots/SiteContext';\nimport type { SiteContextProps } from '../slots/SiteContext';\n\ntype MenuItemType = Extract<GetProp<MenuProps, 'items'>[number], { type?: 'item' }>;\n\nconst useStyle = createStyles(({ token, css }) => {\n  const { colorSplit, iconCls, fontSizeIcon } = token;\n\n  return {\n    prevNextNav: css`\n      width: calc(100% - 234px);\n      margin-inline-end: 170px;\n      margin-inline-start: 64px;\n      overflow: hidden;\n      font-size: ${token.fontSize}px;\n      border-top: 1px solid ${colorSplit};\n      display: flex;\n    `,\n    pageNav: css`\n      flex: 1;\n      height: 72px;\n      line-height: 72px;\n      text-decoration: none;\n\n      ${iconCls} {\n        color: #999;\n        font-size: ${fontSizeIcon}px;\n        transition: all ${token.motionDurationSlow};\n      }\n\n      .chinese {\n        margin-inline-start: ${token.marginXXS}px;\n      }\n    `,\n    prevNav: css`\n      text-align: start;\n      display: flex;\n      justify-content: flex-start;\n      align-items: center;\n\n      .footer-nav-icon-after {\n        display: none;\n      }\n\n      .footer-nav-icon-before {\n        position: relative;\n        line-height: 0;\n        vertical-align: middle;\n        transition: inset-inline-end ${token.motionDurationSlow};\n        margin-inline-end: 1em;\n        inset-inline-end: 0;\n      }\n\n      &:hover .footer-nav-icon-before {\n        inset-inline-end: 0.2em;\n      }\n    `,\n    nextNav: css`\n      text-align: end;\n      display: flex;\n      justify-content: flex-end;\n      align-items: center;\n\n      .footer-nav-icon-before {\n        display: none;\n      }\n\n      .footer-nav-icon-after {\n        position: relative;\n        margin-bottom: 1px;\n        line-height: 0;\n        vertical-align: middle;\n        transition: inset-inline-start ${token.motionDurationSlow};\n        margin-inline-start: 1em;\n        inset-inline-start: 0;\n      }\n\n      &:hover .footer-nav-icon-after {\n        inset-inline-start: 0.2em;\n      }\n    `,\n  };\n});\n\nconst flattenMenu = (menuItems: MenuProps['items']): MenuProps['items'] | null => {\n  if (Array.isArray(menuItems)) {\n    return menuItems.reduce<Exclude<MenuProps['items'], undefined>>((acc, item) => {\n      if (!item) {\n        return acc;\n      }\n      if ('children' in item && item.children) {\n        return acc.concat(flattenMenu(item.children) ?? []);\n      }\n      return acc.concat(item);\n    }, []);\n  }\n  return null;\n};\n\nconst PrevAndNext: React.FC<{ rtl?: boolean }> = ({ rtl }) => {\n  const { styles } = useStyle();\n  const beforeProps = { className: 'footer-nav-icon-before' };\n  const afterProps = { className: 'footer-nav-icon-after' };\n\n  const before = rtl ? <RightOutlined {...beforeProps} /> : <LeftOutlined {...beforeProps} />;\n  const after = rtl ? <LeftOutlined {...afterProps} /> : <RightOutlined {...afterProps} />;\n\n  const [menuItems, selectedKey] = useMenu({ before, after });\n\n  const { isMobile } = useContext<SiteContextProps>(SiteContext);\n\n  const [prev, next] = useMemo(() => {\n    const flatMenu = flattenMenu(menuItems);\n    if (!flatMenu) {\n      return [null, null];\n    }\n    let activeMenuItemIndex = -1;\n    flatMenu.forEach((menuItem, i) => {\n      if (menuItem && menuItem.key === selectedKey) {\n        activeMenuItemIndex = i;\n      }\n    });\n    return [\n      flatMenu[activeMenuItemIndex - 1] as MenuItemType,\n      flatMenu[activeMenuItemIndex + 1] as MenuItemType,\n    ];\n  }, [menuItems, selectedKey]);\n\n  if (isMobile) {\n    return null;\n  }\n\n  return (\n    <section className={styles.prevNextNav}>\n      {prev &&\n        React.cloneElement(prev.label as ReactElement<any>, {\n          className: classNames(styles.pageNav, styles.prevNav, prev.className),\n        })}\n      {next &&\n        React.cloneElement(next.label as ReactElement<any>, {\n          className: classNames(styles.pageNav, styles.nextNav, next.className),\n        })}\n    </section>\n  );\n};\n\nexport default PrevAndNext;\n"],"names":[],"mappings":"+PA0JA,+CAAA,8DA1J4C,gBAEf,oBACN,qBAEoB,qBAEvB,qBACI,aAKxB,IAAM,EAAW,GAAA,cAAY,EAAC,CAAC,CAAE,MAAA,CAAK,CAAE,IAAA,CAAG,CAAE,IAC3C,GAAM,CAAE,WAAA,CAAU,CAAE,QAAA,CAAO,CAAE,aAAA,CAAY,CAAE,CAAG,EAE9C,MAAO,CACL,YAAa,CAAG,CAAC;;;;;iBAKJ,EAAE,EAAM,QAAQ,CAAC;4BACN,EAAE,EAAW;;IAErC,CAAC,CACD,QAAS,CAAG,CAAC;;;;;;MAMX,EAAE,EAAQ;;mBAEG,EAAE,EAAa;wBACV,EAAE,EAAM,kBAAkB,CAAC;;;;6BAItB,EAAE,EAAM,SAAS,CAAC;;IAE3C,CAAC,CACD,QAAS,CAAG,CAAC;;;;;;;;;;;;;;qCAcoB,EAAE,EAAM,kBAAkB,CAAC;;;;;;;;IAQ5D,CAAC,CACD,QAAS,CAAG,CAAC;;;;;;;;;;;;;;;uCAesB,EAAE,EAAM,kBAAkB,CAAC;;;;;;;;IAQ9D,CAAC,AACH,EACF,GAEM,EAAc,AAAC,GACnB,AAAI,MAAM,OAAO,CAAC,GACT,EAAU,MAAM,CAAyC,CAAC,EAAK,IACpE,AAAK,EAGD,aAAc,GAAQ,EAAK,QAAQ,CAC9B,EAAI,MAAM,CAAC,EAAY,EAAK,QAAQ,GAAK,EAAE,EAE7C,EAAI,MAAM,CAAC,GALT,EAMR,EAAE,EAEA,SAkDT,EA/CiD,CAAC,CAAE,IAAA,CAAG,CAAE,IACvD,GAAM,CAAE,OAAA,CAAM,CAAE,CAAG,IACb,EAAc,CAAE,UAAW,wBAAyB,EACpD,EAAa,CAAE,UAAW,uBAAwB,EAElD,EAAS,EAAM,UAAC,eAAa,EAAE,GAAG,CAAW,GAAO,UAAC,cAAY,EAAE,GAAG,CAAW,GACjF,EAAQ,EAAM,UAAC,cAAY,EAAE,GAAG,CAAU,GAAO,UAAC,eAAa,EAAE,GAAG,CAAU,GAE9E,CAAC,EAAW,EAAY,CAAG,GAAA,SAAO,EAAC,CAAE,OAAA,EAAQ,MAAA,CAAM,GAEnD,CAAE,SAAA,CAAQ,CAAE,CAAG,GAAA,YAAU,EAAmB,SAAW,EAEvD,CAAC,EAAM,EAAK,CAAG,GAAA,SAAO,EAAC,KAC3B,IAAM,EAAW,EAAY,GAC7B,GAAI,CAAC,EACH,MAAO,CAAC,KAAM,KAAK,CAErB,IAAI,EAAsB,GAM1B,OALA,EAAS,OAAO,CAAC,CAAC,EAAU,KACtB,GAAY,EAAS,GAAG,GAAK,GAC/B,CAAA,EAAsB,CAAA,EAE1B,GACO,CACL,CAAQ,CAAC,EAAsB,EAAE,CACjC,CAAQ,CAAC,EAAsB,EAAE,CAClC,CACH,EAAG,CAAC,EAAW,EAAY,SAE3B,AAAI,EACK,KAIP,WAAC,WAAQ,UAAW,EAAO,WAAW,WACnC,GACC,SAAK,CAAC,YAAY,CAAC,EAAK,KAAK,CAAuB,CAClD,UAAW,GAAA,SAAU,EAAC,EAAO,OAAO,CAAE,EAAO,OAAO,CAAE,EAAK,SAAS,CACtE,GACD,GACC,SAAK,CAAC,YAAY,CAAC,EAAK,KAAK,CAAuB,CAClD,UAAW,GAAA,SAAU,EAAC,EAAO,OAAO,CAAE,EAAO,OAAO,CAAE,EAAK,SAAS,CACtE,MAGR"}