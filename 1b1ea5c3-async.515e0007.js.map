{"version":3,"sources":[".dumi/theme/slots/Content/DocAnchor.tsx"],"sourcesContent":["import { Anchor } from 'antd';\nimport { createStyles, useTheme } from 'antd-style';\nimport type { AnchorLinkItemProps } from 'antd/es/anchor/Anchor';\nimport classNames from 'classnames';\nimport { useRouteMeta, useTabMeta } from 'dumi';\nimport React from 'react';\n\nexport const useStyle = createStyles(({ token, css }) => {\n  const { antCls } = token;\n  return {\n    anchorToc: css`\n      scrollbar-width: thin;\n      scrollbar-color: unset;\n      ${antCls}-anchor {\n        ${antCls}-anchor-link-title {\n          font-size: ${token.fontSizeSM}px;\n        }\n      }\n    `,\n    tocWrapper: css`\n      position: fixed;\n      top: ${token.headerHeight + token.contentMarginTop - 4}px;\n      inset-inline-end: 0;\n      width: 148px;\n      padding: 0;\n      border-radius: ${token.borderRadius}px;\n      box-sizing: border-box;\n      margin-inline-end: calc(8px - 100vw + 100%);\n      z-index: 10;\n      .toc-debug {\n        color: ${token.purple6};\n        &:hover {\n          color: ${token.purple5};\n        }\n      }\n      > div {\n        box-sizing: border-box;\n        width: 100%;\n        max-height: calc(100vh - ${token.headerHeight + token.contentMarginTop + 24}px) !important;\n        margin: auto;\n        overflow: auto;\n        padding: ${token.paddingXXS}px;\n        backdrop-filter: blur(8px);\n      }\n\n      @media only screen and (max-width: ${token.screenLG}px) {\n        display: none;\n      }\n    `,\n    articleWrapper: css`\n      padding-inline: 48px 164px;\n      padding-block: 0 32px;\n\n      @media only screen and (max-width: ${token.screenLG}px) {\n        & {\n          padding: 0 ${token.paddingLG * 2}px;\n        }\n      }\n    `,\n  };\n});\n\ninterface DocAnchorProps {\n  showDebug?: boolean;\n  debugDemos?: string[];\n}\n\ninterface AnchorItem {\n  id: string;\n  title: string;\n  children?: AnchorItem[];\n}\n\nconst DocAnchor: React.FC<DocAnchorProps> = ({ showDebug, debugDemos = [] }) => {\n  const { styles } = useStyle();\n  const token = useTheme();\n  const meta = useRouteMeta();\n  const tab = useTabMeta();\n\n  const renderAnchorItem = (item: AnchorItem): AnchorLinkItemProps => ({\n    href: `#${item.id}`,\n    title: item.title,\n    key: item.id,\n    children: item.children\n      ?.filter((child) => showDebug || !debugDemos.includes(child.id))\n      .map<AnchorLinkItemProps>((child) => ({\n        key: child.id,\n        href: `#${child.id}`,\n        title: (\n          <span className={classNames({ 'toc-debug': debugDemos.includes(child.id) })}>\n            {child?.title}\n          </span>\n        ),\n      })),\n  });\n\n  const anchorItems = React.useMemo<AnchorItem[]>(\n    () =>\n      (tab?.toc || meta.toc).reduce<AnchorItem[]>((result, item) => {\n        if (item.depth === 2) {\n          result.push({ ...item });\n        } else if (item.depth === 3) {\n          const parent = result[result.length - 1];\n          if (parent) {\n            parent.children = parent.children || [];\n            parent.children.push({ ...item });\n          }\n        }\n        return result;\n      }, []),\n    [tab?.toc, meta.toc],\n  );\n\n  if (!meta.frontmatter.toc) {\n    return null;\n  }\n\n  return (\n    <section className={styles.tocWrapper}>\n      <Anchor\n        affix={false}\n        className={styles.anchorToc}\n        targetOffset={token.anchorTop}\n        showInkInFixed\n        items={anchorItems.map<AnchorLinkItemProps>(renderAnchorItem)}\n      />\n    </section>\n  );\n};\n\nexport default DocAnchor;\n"],"names":[],"mappings":"gQAkIA,OAAyB,mBAAzB,IA3Ha,QAAQ,mBAAR,8CAPU,gBACgB,oBAEhB,iBACkB,oBACvB,aAEX,IAAM,EAAW,GAAA,cAAY,EAAC,CAAC,CAAE,MAAA,CAAK,CAAE,IAAA,CAAG,CAAE,IAClD,GAAM,CAAE,OAAA,CAAM,CAAE,CAAG,EACnB,MAAO,CACL,UAAW,CAAG,CAAC;;;MAGb,EAAE,EAAO;QACP,EAAE,EAAO;qBACI,EAAE,EAAM,UAAU,CAAC;;;IAGpC,CAAC,CACD,WAAY,CAAG,CAAC;;WAET,EAAE,EAAM,YAAY,CAAG,EAAM,gBAAgB,CAAG,EAAE;;;;qBAIxC,EAAE,EAAM,YAAY,CAAC;;;;;eAK3B,EAAE,EAAM,OAAO,CAAC;;iBAEd,EAAE,EAAM,OAAO,CAAC;;;;;;iCAMA,EAAE,EAAM,YAAY,CAAG,EAAM,gBAAgB,CAAG,GAAG;;;iBAGnE,EAAE,EAAM,UAAU,CAAC;;;;yCAIK,EAAE,EAAM,QAAQ,CAAC;;;IAGtD,CAAC,CACD,eAAgB,CAAG,CAAC;;;;yCAIiB,EAAE,EAAM,QAAQ,CAAC;;qBAErC,EAAE,AAAkB,EAAlB,EAAM,SAAS,CAAK;;;IAGvC,CAAC,AACH,EACF,OAsEA,EAzD4C,CAAC,CAAE,UAAA,CAAS,CAAE,WAAA,EAAa,EAAE,CAAE,IACzE,GAAM,CAAE,OAAA,CAAM,CAAE,CAAG,IACb,EAAQ,GAAA,UAAQ,IAChB,EAAO,GAAA,cAAY,IACnB,EAAM,GAAA,YAAU,IAmBhB,EAAc,SAAK,CAAC,OAAO,CAC/B,IACE,AAAC,CAAA,OAAA,SAAA,EAAK,GAAG,GAAI,EAAK,GAAG,AAAD,EAAG,MAAM,CAAe,CAAC,EAAQ,KACnD,GAAI,AAAe,IAAf,EAAK,KAAK,CACZ,EAAO,IAAI,CAAC,CAAE,GAAG,CAAI,AAAC,QACjB,GAAI,AAAe,IAAf,EAAK,KAAK,CAAQ,CAC3B,IAAM,EAAS,CAAM,CAAC,EAAO,MAAM,CAAG,EAAE,CACpC,IACF,EAAO,QAAQ,CAAG,EAAO,QAAQ,EAAI,EAAE,CACvC,EAAO,QAAQ,CAAC,IAAI,CAAC,CAAE,GAAG,CAAI,AAAC,IAEnC,CACA,OAAO,EACT,EAAG,EAAE,EACP,OAAC,SAAA,EAAK,GAAG,CAAE,EAAK,GAAG,CAAC,SAGtB,AAAK,EAAK,WAAW,CAAC,GAAG,CAKvB,UAAC,WAAQ,UAAW,EAAO,UAAU,UACnC,UAAC,QAAM,EACL,MAAO,CAAA,EACP,UAAW,EAAO,SAAS,CAC3B,aAAc,EAAM,SAAS,CAC7B,cAAc,IACd,MAAO,EAAY,GAAG,CA7CH,AAAC,QAId,QAJyD,CACnE,KAAM,CAAC,CAAC,EAAE,EAAK,EAAE,CAAC,CAAC,CACnB,MAAO,EAAK,KAAK,CACjB,IAAK,EAAK,EAAE,CACZ,QAAQ,SAAE,EAAA,EAAK,QAAQ,YAAb,SAAA,EACN,MAAM,CAAC,AAAC,GAAU,GAAa,CAAC,EAAW,QAAQ,CAAC,EAAM,EAAE,GAC7D,GAAG,CAAsB,AAAC,GAAW,CAAA,CACpC,IAAK,EAAM,EAAE,CACb,KAAM,CAAC,CAAC,EAAE,EAAM,EAAE,CAAC,CAAC,CACpB,MACE,UAAC,QAAK,UAAW,GAAA,SAAU,EAAC,CAAE,YAAa,EAAW,QAAQ,CAAC,EAAM,EAAE,CAAE,kBACtE,SAAA,EAAO,KAAK,EAGnB,CAAA,EACJ,SAoBS,KAcX"}